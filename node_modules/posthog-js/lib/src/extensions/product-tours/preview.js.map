{"version":3,"file":"preview.js","sourceRoot":"","sources":["../../../../src/extensions/product-tours/preview.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAmBA,4DAgDC;;AAnED,iCAAoC;AAGpC,+CAA2D;AAC3D,sFAAoF;AACpF,gFAA8E;AAC9E,6DAAqG;AAErG,IAAM,QAAQ,GAAG,kBAAqB,CAAA;AAWtC,SAAgB,wBAAwB,CAAC,EAOP;QAN9B,IAAI,UAAA,EACJ,UAAU,gBAAA,EACV,aAAa,mBAAA,EACb,iBAAa,EAAb,SAAS,mBAAG,CAAC,KAAA,EACb,kBAAc,EAAd,UAAU,mBAAG,CAAC,KAAA,EACd,KAAK,WAAA;IAEL,aAAa,CAAC,SAAS,GAAG,EAAE,CAAA;IAE5B,IAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;IAChD,IAAA,yDAAmC,EAAC,UAAU,EAAE,UAAU,CAAC,CAAA;IAC3D,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,CAAA;IACrC,IAAM,MAAM,GAAG,UAAU,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;IAExD,IAAM,UAAU,GAAG,IAAA,8CAAwB,GAAE,CAAA;IAC7C,IAAI,UAAU,EAAE,CAAC;QACb,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,CAAA;IAClC,CAAC;IAED,IAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;IAClD,MAAM,CAAC,WAAW,CAAC,YAAY,CAAC,CAAA;IAEhC,IAAM,YAAY,GAAG,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAA;IAC3C,IAAM,YAAY,GAAG,YAAY,CAAC,CAAC,CAAC,qCAAqC,CAAC,CAAC,CAAC,iBAAiB,CAAA;IAE7F,IAAA,eAAM,EACF,gCAAK,KAAK,EAAC,mBAAmB,YAC1B,gCAAK,KAAK,EAAE,YAAY,EAAE,KAAK,aAAI,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,IAAK,KAAK,aAC/E,YAAY,CAAC,CAAC,CAAC,CACZ,uBAAC,uDAA0B,IACvB,IAAI,EAAE,IAAI,EACV,UAAU,EAAE,UAAU,EACtB,SAAS,EAAE,SAAS,EACpB,UAAU,EAAE,UAAU,GACxB,CACL,CAAC,CAAC,CAAC,CACA,uBAAC,iDAAuB,IACpB,IAAI,EAAE,IAAI,EACV,UAAU,EAAE,UAAU,EACtB,SAAS,EAAE,SAAS,EACpB,UAAU,EAAE,UAAU,GACxB,CACL,GACC,GACJ,EACN,YAAY,CACf,CAAA;AACL,CAAC","sourcesContent":["import { render, JSX } from 'preact'\n\nimport { ProductTourStep, ProductTourAppearance } from '../../posthog-product-tours-types'\nimport { document as _document } from '../../utils/globals'\nimport { ProductTourSurveyStepInner } from './components/ProductTourSurveyStepInner'\nimport { ProductTourTooltipInner } from './components/ProductTourTooltipInner'\nimport { getProductTourStylesheet, addProductTourCSSVariablesToElement } from './product-tours-utils'\n\nconst document = _document as Document\n\nexport interface RenderProductTourPreviewOptions {\n    step: ProductTourStep\n    appearance?: ProductTourAppearance\n    parentElement: HTMLElement\n    stepIndex?: number\n    totalSteps?: number\n    style?: JSX.CSSProperties\n}\n\nexport function renderProductTourPreview({\n    step,\n    appearance,\n    parentElement,\n    stepIndex = 0,\n    totalSteps = 1,\n    style,\n}: RenderProductTourPreviewOptions): void {\n    parentElement.innerHTML = ''\n\n    const shadowHost = document.createElement('div')\n    addProductTourCSSVariablesToElement(shadowHost, appearance)\n    parentElement.appendChild(shadowHost)\n    const shadow = shadowHost.attachShadow({ mode: 'open' })\n\n    const stylesheet = getProductTourStylesheet()\n    if (stylesheet) {\n        shadow.appendChild(stylesheet)\n    }\n\n    const renderTarget = document.createElement('div')\n    shadow.appendChild(renderTarget)\n\n    const isSurveyStep = step.type === 'survey'\n    const tooltipClass = isSurveyStep ? 'ph-tour-tooltip ph-tour-survey-step' : 'ph-tour-tooltip'\n\n    render(\n        <div class=\"ph-tour-container\">\n            <div class={tooltipClass} style={{ position: 'relative', animation: 'none', ...style }}>\n                {isSurveyStep ? (\n                    <ProductTourSurveyStepInner\n                        step={step}\n                        appearance={appearance}\n                        stepIndex={stepIndex}\n                        totalSteps={totalSteps}\n                    />\n                ) : (\n                    <ProductTourTooltipInner\n                        step={step}\n                        appearance={appearance}\n                        stepIndex={stepIndex}\n                        totalSteps={totalSteps}\n                    />\n                )}\n            </div>\n        </div>,\n        renderTarget\n    )\n}\n"]}